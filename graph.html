<!DOCTYPE html>
<html style="height: 100%">
<head>
    <meta charset="utf-8">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5.0.1/dist/echarts.min.js"></script>
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">

   
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-LCPyFKQyML7mqtS+4XytolfqyqSlcbB3bvDuH9vX2sdQMxRonb/M3b9EmhCNNNrV" crossorigin="anonymous"></script> -->
</head>
<body style="height: 99%; width: 98%;margin: 0;background-color: #ECF0F5;">

    <div id="main" style="width: 100%;height: 100%;"></div>

    <!-- å³ä¸‹è§’æç¤ºæ  -->
    <div role="alert" aria-live="assertive" aria-atomic="true" class="toast" data-autohide="false" style="position: absolute;bottom: 10px;right: 10px;opacity:100;width: 300px;height: 150px;">
        <div class="toast-header">
          <!-- <img src="..." class="rounded mr-2" alt="..."> -->
          <strong class="mr-auto">Tips</strong>
          <small></small>
          <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close" onclick="close()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="toast-body" style="padding-top: 20px;">
            
            ğŸ’¥ åŒå‡»ç©ºç™½åŒºåŸŸå¯åˆ‡æ¢è§†å›¾
            <br><br>
            ğŸ’¥ æä¾› `åŠ›å¼•å¯¼å¸ƒå±€`/`ç¯å½¢å¸ƒå±€` å¸ƒå±€æ–¹å¼
        </div>
      </div>
    <!-- Uncomment this line if you want to dataTool extension
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5.0.1/dist/extension/dataTool.min.js"></script>
    -->
    <!-- Uncomment this line if you want to echarts-stat extension
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-stat@latest/dist/ecStat.min.js"></script>
    -->
    <!-- Uncomment this line if you want to use map
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5.0.1/map/js/china.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5.0.1/map/js/world.js"></script>
    -->
    <!-- Uncomment these two lines if you want to use bmap extension
    <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=<Your Key Here>"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5.0.1/dist/extension/bmap.min.js"></script>
    -->

</body>
    
</html>
<script>
// import * as echarts from 'echarts';
//var ROOT_PATH = 'https://cdn.jsdelivr.net/gh/apache/echarts-website@asf-site/examples';

var chartDom = document.getElementById('main');
var myChart = echarts.init(chartDom);
var option;

myChart.showLoading();
$.get('./data1.json', function (graph) {
    myChart.hideLoading();
    graph.nodes.forEach(function (node) {
        //node.symbolSize = 15;  //èŠ‚ç‚¹çš„é»˜è®¤å…¨éƒ¨ï¼Œå¦åˆ™æŒ‰ç…§jsonä¸­çš„
    });
    option = {
        title: {
            text: 'çº¢æ¥¼æ¢¦äººç‰©å…³ç³»æ€»è§ˆ',
            subtext: 'By Yyk.',
            top: 'top',
            left: 'right'
        },
        toolbox: {
            show: true,
            orient: 'vertical',
            left:50,
            top: 350,
            feature: {
                restore: {},
                saveAsImage: {}
            }
        }
        ,
        legend: [{ //åˆ†ç±»æ 
            //selectedMode: 'single',
            data: graph.categories.map(function (a) {
                return a.name;
            }),
            left: '2%',
            top: '2%',
            orient: 'vertical'
        }],
        animationDuration: 2500,
        animationEasingUpdate: 'quadraticIn',
        animationDuration: function (idx) {
            // è¶Šå¾€åçš„æ•°æ®æ—¶é•¿è¶Šå¤§
            return idx * 100;
        },
        animationEasing: 'quadraticIn',
        series: [ //æœ¬å›¾åªæœ‰æ­¤ä¸€ä¸ªç³»åˆ—ï¼Œæ‰€æœ‰åªåœ¨è¿™é‡Œæ“ä½œ
            {
                //name: 'çº¢æ¥¼æ¢¦äººç‰©å…³ç³»æ€»è§ˆ',
                type: 'graph',
                layout: 'circular',
                value: 30,
                data: graph.nodes,
                links: graph.links,
                categories: graph.categories,
                roam: true,
                draggable:true,
                legendHoverLink:true,
                symbolSize: 50,  //èŠ‚ç‚¹å¤§å°
                lineStyle: {     //å…³ç³»é…ç½®
                    color: 'source',
                    curveness: 0.2
                },
                edgeSymbol : ['circle', 'arrow'], //è¾¹çš„æŒ‡å‘ï¼Œç”¨é»˜è®¤çš„ç›´çº¿ï¼Œä¸ç”¨ç®­å¤´
                label: {
                    position: 'right'
                },
                force: {
                    initLayout:'circular',
                    layoutAnimation : true,
                    gravity : 0, //å¼•åŠ›å› å­ï¼Œå€¼è¶Šå¤§è¶Šå¾€ä¸­å¿ƒé 
                    repulsion: 500, //æ–¥åŠ›å› å­ï¼Œå’ŒedgeLength ä¸€å—å†³å®šè·ç¦»
                    //edgeLength: graph.links.value,  //è¾¹çš„è·ç¦»ï¼Œç”¨æ•°ï¼Œæ¯”å¦‚ [10,50]ï¼Œlimå°= 10ï¼›limå¤§= 50
                    //edgeLength:100,
                    friction :0.1
                },
                emphasis: {
                    focus: 'adjacency', //èšç„¦å…³ç³»å›¾ä¸­çš„é‚»æ¥ç‚¹å’Œè¾¹çš„å›¾å½¢
                    blurScope: 'series',
                    lineStyle: {
                        width: 10
                    },
                    edgeLabel:{ //é€‰ä¸­æ˜¾ç¤ºå…³ç³»
                        show: true
                    } 
                },
                label: { //èŠ‚ç‚¹æ ‡ç­¾
                    show: true
                },
                edgeLabel: { //å…³ç³»æ ‡ç­¾
                    show: true,
                    formatter: function (params) {  //æ ¼å¼åŒ–å…³ç³»æ ‡ç­¾æ˜¾ç¤º -ã€‹ çˆ¶äº²
                        //console.log(params.data.value)
                        // do some thing
                        return  params.data.value
                    }
                }
                //å…³ç³»çš„æ ‡ç­¾åœ¨ jsonä¸­è®¾ç½®
            }
        ]
    };

    myChart.setOption(option);

        //åŒå‡»ç©ºç™½åŒºåŸŸåˆ‡æ¢è§†å›¾
        myChart.getZr().on('dblclick', function (event) {
        // æ²¡æœ‰ target æ„å‘³ç€é¼ æ ‡/æŒ‡é’ˆä¸åœ¨ä»»ä½•ä¸€ä¸ªå›¾å½¢å…ƒç´ ä¸Šï¼Œå®ƒæ˜¯ä»â€œç©ºç™½å¤„â€è§¦å‘çš„ã€‚
        if (!event.target) {
            // ç‚¹å‡»åœ¨äº†ç©ºç™½å¤„ï¼Œåšäº›ä»€ä¹ˆã€‚
            //console.log(event)
            //console.log(option.series[0].layout)  //å¯ä»¥ç”¨åˆ°å…¨å±€çš„mychartå˜é‡

            //æ¢æµ‹å›¾çš„ç±»å‹ï¼Œå®ç°circularå’Œforceç±»å‹çš„äº’æ¢
            if (option.series[0].layout == "circular"){
                option.series[0].layout = "force"
            }else{
                option.series[0].layout = "circular"
            }
            
            //è®¾ç½®å®Œä¹‹åï¼Œè®°å¾—å†è®¾ç½®
            //å› ä¸ºä»–ä¸åƒVue æ˜¯å…¨å±€ç»‘å®šçš„
            option && myChart.setOption(option);
        }
    });
});

option && myChart.setOption(option);


</script>

<!-- å³ä¸‹è§’æç¤ºæŒ‰é’® å…³é—­ -->
<script>
  $(document).ready(function(){
  $(".close").click(function(){
      $(".toast").hide()
  });
});
</script>